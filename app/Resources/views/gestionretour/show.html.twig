{% extends 'base.html.twig' %}
{% block div %}
    <link rel="alternate" media="print" href="{{ path('etiquette', { 'id': gestionRetour.id }) }}">
    <script type="text/javascript">

        function imprime(){
            window.frames[0].print();
        }
    </script>
    {% endblock %}
{% block body %}

    <div class="page-header">
        <h1>Détail commande N° {{ gestionRetour.numeroSage }}</h1>
    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                        <h3  class="panel-title">Informations colis
                            <button type="button" class="btn btn-primary btn-xs" name="button" type="button" onClick="javascript:imprime()">
                                <span class="glyphicon glyphicon-print" aria-hidden="true"></span> Imprimer les supports
                            </button>
                        </h3>

                </div>
                <div class="panel-body">


                    <div class="col-xs-12 col-sm-12 col-md-12">

                        <div class="col-xs-12 col-sm-6 col-md-3">
                            <div class="form-group">
                                <label for="disabledTextInput">Agence</label>
                                <div>{{ gestionRetour.agence.nomAgence }}</div>
                            </div>
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-3">
                            <div class="form-group">
                                <label for="disabledTextInput">Date entree entrepot</label>
                                {% if date(gestionRetour.dateEntreeEntrepot) ==  date('') %}
                                <div>{{ gestionRetour.dateEntreeEntrepot|date('') }}</div>
                                {% else %}
                                    <div>{{ gestionRetour.dateEntreeEntrepot|date('d-m-Y') }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-12 col-sm-12 col-md-12">

                        <div class="col-xs-12 col-sm-6 col-md-3">
                            {% if date(gestionRetour.dateSortieEntrepot) !=  date('') %}
                                <div class="form-group">
                                    <label for="disabledTextInput">Date sortie entrepot</label>
                                    <div>{{ gestionRetour.dateSortieEntrepot|date('Y-m-d') }}</div>
                                </div>
                            {% endif %}
                        </div>
                    </div>

                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="col-xs-12 col-sm-6 col-md-6">
                        <div class="form-group">
                            <label for="disabledTextInput">Nom destinataire</label>
                            <div>{{ gestionRetour.nomDestinataire | upper }}</div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-6">
                        <div class="form-group">
                            <label for="disabledTextInput">Etat</label>
                            <div>

                            </div>
                        </div>

                    </div>

                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <div class="col-xs-12 col-sm-6 col-md-3">
                            <div class="form-group">
                                <label for="disabledTextInput">Numero sage</label>
                                <div>{{ gestionRetour.numeroSage }}</div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3">
                            <div class="form-group">
                                <label for="disabledTextInput">Code barre Sage</label>
                                {{ codeSage |raw }}
                            </div>
                        </div>

                    </div>
                </div>

                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Numero donneur ordre</label>
                            <div>{{ gestionRetour.numeroDonneurOrdre }}</div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Code barre donneur d'ordre</label>
                            {{ codeDo |raw }}
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Donneur ordre</label>
                            <div>{{ gestionRetour.donneurOrdre.nomDonneurOrdre | upper }}</div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Magasin</label>
                            <div>{{ gestionRetour.magasin.nomMagasin  | upper }}</div>
                        </div>
                    </div>


                </div>


            </div>

        </div>
    </div>

    <div class="col-xs-12 col-sm-12 col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Détails colis</h3>
            </div>
            <div class="panel-body">
                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="col-xs-12 col-sm-6 col-md-2">
                        <div class="form-group">
                            <label for="disabledTextInput">Nombre colis</label>
                            <div>{{ gestionRetour.nombreColis }}</div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-2">
                        <div class="form-group">
                            <label for="disabledTextInput">Nombre support</label>
                            <div>{{ gestionRetour.nombreSupport }}</div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-4 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Prestation</label>
                            <div>{{ gestionRetour.prestation.nomPrestation }}</div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-4 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Motif retour</label>
                            <div>{{ gestionRetour.motifRetour.nomMotifRetour }}</div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-4 col-md-2">
                        <div class="form-group">
                            <label for="disabledTextInput">Emplacement</label>
                            <div>{{ gestionRetour.emplacement  }}</div>
                        </div>
                    </div>

                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <div class="form-group">
                            <label for="disabledTextInput">Commentaire</label>
                            <div>{{ gestionRetour.commentaire }}</div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


{% if gestionRetour.donneurOrdre.nomDonneurOrdre starts with 'IKEA' %}

    <div class="col-xs-12 col-sm-12 col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                {% if is_granted('ROLE_EXPLOITANT') or is_granted('ROLE_ADMIN') %}
                    <h3 class="panel-title">Suivi DSA <a href="{{ path('update_dsa', { 'id': gestionRetour.id }) }}"><span class="label label-info" ><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Mise à jour DSA</span></a></h3>
                {% endif %}
            </div>
            <div class="panel-body">
                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Date demande DSA</label>
                            {{ gestionRetour.dateDemandeDsa is empty ? "" : gestionRetour.dateDemandeDsa|date('d-m-Y')}}
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Date réponse DSA</label>

                            {{ gestionRetour.dateReponseDemandeDsa is empty ? "" : gestionRetour.dateReponseDemandeDsa|date('d-m-Y')}}

                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Numéro de RAQ</label>
                            <div>{{ gestionRetour.numeroRaq }}</div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <label for="disabledTextInput">Date Reception bon reprise</label>
                        {{ gestionRetour.dateReceptionBonReprise is empty ? "" : gestionRetour.dateReceptionBonReprise|date('d-m-Y')}}

                    </div>
                </div>
            </div>
        </div>
    </div>

{% endif %}
</div>


    <ul class="list-inline">
        <li>
            <a class="btn btn-info" href="{{ path('retours_index') }}"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> Retour au listing</a>
        </li>
        {% if is_granted("ROLE_ADMIN") %}
        <li>
            <a class="btn btn-warning" href="{{ path('retours_edit', { 'id': gestionRetour.id }) }}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Modifier</a>
        </li>
        {% endif %}
        {% if is_granted('ROLE_SUPER_ADMIN') %}
        <li>
            {{ form_start(delete_form) }}
                <button type="submit" class="btn btn-danger">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Supprimer
                </button>

            {{ form_end(delete_form) }}
        </li>
        {% endif %}
    </ul>

    <iframe height="0px" src="{{ path('etiquette', { 'id': gestionRetour.id }) }}" style="visibility: hidden"></iframe>


{% endblock %}