{% extends 'base.html.twig' %}
{% block div %}
    <link rel="alternate" media="print" href="{{ path('etiquette', { 'id': gestionRetour.id }) }}">
    <script type="text/javascript">

        function imprime(){
            window.frames[0].print();
        }
    </script>
    {% endblock %}
{% block body %}

    <div class="page-header">
        <h1>Détail commande N° {{ gestionRetour.numeroSage }}
            <button type="button" class="btn btn-sm btn-primary" name="button" type="button" onClick="javascript:imprime()">
                <span class="glyphicon glyphicon-print" aria-hidden="true"></span> Imprimer les supports
            </button>
        </h1>
    </div>
<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Informations colis</h3>
            </div>
            <div class="panel-body">


                <div class="col-xs-12 col-sm-12 col-md-12">

                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Agence</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.agence.nomAgence }}" readonly>
                        </div>
                    </div>

                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Date entree entrepot</label>
                            {% if date(gestionRetour.dateEntreeEntrepot) ==  date('') %}
                                <input class="form-control" type="text" value="{{ gestionRetour.dateEntreeEntrepot|date('') }}" readonly>
                            {% else %}
                                <input class="form-control" type="text" value="{{ gestionRetour.dateEntreeEntrepot|date('d-m-Y') }}" readonly>
                            {% endif %}
                        </div>
                    </div>

                    <div class="col-xs-12 col-sm-6 col-md-3">
                        {% if date(gestionRetour.dateSortieEntrepot) !=  date('') %}
                            <div class="form-group">
                                <label for="disabledTextInput">Date sortie entrepot</label>
                                <input class="form-control" type="date" value="{{ gestionRetour.dateSortieEntrepot|date('Y-m-d') }}" readonly>
                            </div>
                        {% endif %}
                    </div>
                </div>

                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="col-xs-12 col-sm-6 col-md-6">
                        <div class="form-group">
                            <label for="disabledTextInput">Nom destinataire</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.nomDestinataire }}" readonly>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-6">
                        <div class="form-group">
                            <label for="disabledTextInput">Etat</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.etat.nomEtat }}" readonly>
                        </div>
                    </div>
                </div>

                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Numero donneur ordre</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.numeroDonneurOrdre }}" readonly>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Code barre DO</label>
                            {{ codeDo |raw }}
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-6">
                        <div class="form-group">
                            <label for="disabledTextInput">Donneur ordre</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.donneurOrdre.nomDonneurOrdre }}" readonly>
                        </div>
                    </div>

                </div>

                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Numero sage</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.numeroSage }}" readonly>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Code barre Sage</label>
                            {{ codeSage |raw }}
                        </div>

                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-6">
                        {% if gestionRetour.donneurOrdre.nomDonneurOrdre == "IKEA" %}
                            <!-- champ magasin à prévoir -->
                            <div class="form-group">
                                <label for="disabledTextInput">Magasin</label>
                                <input class="form-control" type="text" value="Champ à prévoir" readonly>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xs-12 col-sm-12 col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Détails colis</h3>
            </div>
            <div class="panel-body">
                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="col-xs-12 col-sm-6 col-md-2">
                        <div class="form-group">
                            <label for="disabledTextInput">Nombre colis</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.nombreColis }}" readonly>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-2">
                        <div class="form-group">
                            <label for="disabledTextInput">Nombre support</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.nombreSupport }}" readonly>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-4 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Prestation</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.prestation.nomPrestation }}" readonly>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-4 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Motif retour</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.motifRetour.nomMotifRetour }}" readonly>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-4 col-md-2">
                        <div class="form-group">
                            <label for="disabledTextInput">Emplacement</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.emplacement.nomEmplacement }}" readonly>
                        </div>
                    </div>

                </div>

                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <div class="form-group">
                            <label for="disabledTextInput">Commentaire</label>
                            <textarea class="form-control" readonly>{{ gestionRetour.commentaire }}</textarea>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% if gestionRetour.donneurOrdre.nomDonneurOrdre == "IKEA" %}
    <div class="col-xs-12 col-sm-12 col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Suivi DSA</h3>
            </div>
            <div class="panel-body">
                <div class="col-xs-12 col-sm-12 col-md-12">
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Date demande DSA</label>
                            {% if date(gestionRetour.dateDemandeDsa) ==  date('') %}
                                <input class="form-control" type="text" value="{{ gestionRetour.dateDemandeDsa|date('') }}" readonly>
                            {% else %}
                                <input class="form-control" type="text" value="{{ gestionRetour.dateDemandeDsa|date('d-m-Y') }}" readonly>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Date réponse DSA</label>
                            {% if date(gestionRetour.dateReponseDemandeDsa) ==  date('') %}
                                <input class="form-control" type="text" value="{{ gestionRetour.dateReponseDemandeDsa|date('') }}" readonly>
                            {% else %}
                                <input class="form-control" type="text" value="{{ gestionRetour.dateReponseDemandeDsa|date('d-m-Y') }}" readonly>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <div class="form-group">
                            <label for="disabledTextInput">Numéro de RAQ</label>
                            <input class="form-control" type="text" value="{{ gestionRetour.numeroRaq }}" readonly>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <label for="disabledTextInput">Date Reception bon reprise</label>
                        {% if date(gestionRetour.dateReceptionBonReprise) ==  date('') %}
                            <input class="form-control" type="text" value="{{ gestionRetour.dateReceptionBonReprise|date('') }}" readonly>
                        {% else %}
                            <input class="form-control" type="text" value="{{ gestionRetour.dateReceptionBonReprise|date('d-m-Y') }}" readonly>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endif %}


    <ul class="list-inline">
        <li>
            <a class="btn btn-info" href="{{ path('retours_index') }}"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> Retour au listing</a>
        </li>
        <li>
            <a class="btn btn-warning" href="{{ path('retours_edit', { 'id': gestionRetour.id }) }}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Modifier</a>
        </li>
        <li>
            {{ form_start(delete_form) }}
                <button type="submit" class="btn btn-danger">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Supprimer
                </button>

            {{ form_end(delete_form) }}
        </li>
    </ul>

    <iframe height="0px" src="{{ path('etiquette', { 'id': gestionRetour.id }) }}" style="visibility: hidden"></iframe>


{% endblock %}